---
phase: 3
plan: 1
wave: 1
depends_on: []
files_modified: []
autonomous: true

must_haves:
  truths:
    - "Workout definitions containing properties like calories, categories, and YouTube IDs format gracefully into Hive."
  artifacts:
    - "lib/data/models/workout_model.dart"
    - "lib/data/providers/workout_provider.dart"
---

# Plan 3.1: Workout Data Layer

<objective>
Implement the data structure and Riverpod provider for fetching, organizing, and delivering culturally relevant workouts (Yoga, Bollywood Dance, Desi, HIIT, Indian Sports). Uses predefined static arrays injected dynamically bypassing complex API costs.

Purpose: Foundation for zero-cost localized fitness video browsing.
Output: Real workable `WorkoutModel` lists mapped cleanly for the UI over `WorkoutProvider`.
</objective>

<context>
Load for context:
- fitkarma/lib/core/storage/hive_service.dart
- fitkarma/lib/data/providers/auth_provider.dart
</context>

<tasks>

<task type="auto">
  <name>Build Workout Model & Repository</name>
  <files>lib/data/models/workout_model.dart, lib/data/repositories/workout_repository.dart</files>
  <action>
    - Create `WorkoutModel` implementing standard `HiveObject` with fields `id`, `title`, `category`, `youtubeId`, `estimatedCaloriesPerMin`, `durationMins`.
    - Generate Hive `.g.dart` parsers smoothly mapping it to memory.
    - Write a Local `WorkoutRepository` instantiating ~15 custom Indian/Yoga/Bollywood based workout mappings directly referencing valid standard YouTube ID hashes.
  </action>
  <verify>Hive builds `workout_model.g.dart` perfectly without warnings.</verify>
  <done>Clean data structures map static Indian workouts effectively for retrieval.</done>
</task>

<task type="auto">
  <name>Expose Workout Provider</name>
  <files>lib/data/providers/workout_provider.dart</files>
  <action>
    - Hook the `WorkoutRepository` through a `WorkoutNotifier` state provider allowing explicit categorization sorting (`getWorkoutsByCategory('Yoga')`).
  </action>
  <verify>The `WorkoutProvider` imports into Riverpod contexts smoothly without failing static type resolution natively.</verify>
  <done>Lists correctly categorize without requiring live runtime networks.</done>
</task>

</tasks>

<verification>
After all tasks, verify:
- [ ] Models resolve safely through Hive caching definitions successfully.
</verification>

<success_criteria>
- [ ] All tasks verified
- [ ] Must-haves confirmed
</success_criteria>
