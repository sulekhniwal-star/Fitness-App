---
phase: 1
plan: 4
wave: 2
---

# Plan 1.4: Authenticaton Flow & Screens

## Objective
Implement Splash, Onboarding, and Auth UI screens attached to the PocketBase auth state. Create the core logic for user login/registration.

## Context
- lib/features/auth/
- lib/core/router/

## Tasks

<task type="auto">
  <name>Splash & Onboarding UI</name>
  <files>lib/features/auth/presentation/splash_screen.dart, lib/features/auth/presentation/onboarding_screen.dart</files>
  <action>
    - Create a custom, culturally themed Splash Screen using standard widgets.
    - Build a 3-page Onboarding carousel outlining the key features of FitKarma.
  </action>
  <verify>The carousel swipes left-to-right correctly, with a Skip/Next button layout.</verify>
  <done>Screens dynamically respond to user onboarding status.</done>
</task>

<task type="auto">
  <name>Auth UI & Logic</name>
  <files>lib/features/auth/presentation/login_screen.dart, lib/features/auth/presentation/register_screen.dart, lib/features/auth/repositories/auth_repository.dart</files>
  <action>
    - Design and code Login & Register text fields, buttons, and validation.
    - Set up an `AuthRepository` that utilizes `PocketBase` Email/Password sign-ins and handles errors elegantly.
    - Add a `redirect` logic in `GoRouter` so that unauthorized users go to `/login`, bypassing the splash if they're authenticated.
  </action>
  <verify>Triggering login with mocked data successfully stores tokens/context in PocketBase SDK.</verify>
  <done>Auth flow perfectly shields the app from unauthenticated usage.</done>
</task>

## Success Criteria
- [ ] Splash & Onboarding visuals work
- [ ] PocketBase Login/Registration API integrated contextually
- [ ] Route guarding protects main dashboard from anonymous access
