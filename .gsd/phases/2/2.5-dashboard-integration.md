---
phase: 2
plan: 5
wave: 2
depends_on: [2, 3]
files_modified: []
autonomous: true

must_haves:
  truths:
    - "A dynamic dashboard fully maps pedometer counts with goals replacing mock steps."
    - "Real karma badges dynamically refresh via providers."
  artifacts:
    - "lib/presentation/screens/home/dashboard_tab.dart"
---

# Plan 2.5: Dashboard Statistics Application

<objective>
To replace the mock numbers existing in the `dashboard_tab` with real numbers fed directly from our background `step_provider` logic and user `KarmaProvider` balances. Show step completion rings and recent weekly steps via `fl_chart`.

Purpose: Give the user visual progression representing genuine activity logs accurately hooked via Riverpod contexts.
</objective>

<context>
Load for context:
- lib/presentation/screens/home/dashboard_tab.dart
- lib/data/providers/step_provider.dart
- lib/data/providers/karma_provider.dart
</context>

<tasks>

<task type="auto">
  <name>Link Up Progress State</name>
  <files>lib/presentation/screens/home/dashboard_tab.dart</files>
  <action>
    - Ensure Riverpod watches the current `step_provider` state overriding the hard-coded `4500` step values on the Dashboard pie chart mapping daily goal metrics effectively.
    - Wire the Cricket stats calculator rendering correctly relative to the new live count tracking integers natively.
    - Bind `Karma Badge` watching the `ref.watch(authStateProvider).user?.karmaPoints`.
  </action>
  <verify>The Dashboard natively inherits live data directly tied to providers rendering cleanly without errors on the step metric.</verify>
  <done>User step records reflect visually without hardcoded arrays breaking the logic.</done>
</task>

<task type="auto">
  <name>Deploy Weekly Graph Data</name>
  <files>lib/presentation/screens/home/dashboard_tab.dart</files>
  <action>
    - Consume standard `fl_chart` configurations watching a 7-day query map from the `Hive` history inside `step_provider` rendering it accurately into the UI array substituting the standard values seamlessly.
    - Guarantee `null` fallbacks when parsing history so empty days don't crash the widget list renderer recursively.
  </action>
  <verify>Weekly stats match daily Hive history explicitly inside the step provider definitions passing safety tests.</verify>
  <done>Clean graphs match recorded health data properly mapped by days.</done>
</task>

</tasks>

<verification>
After all tasks, verify:
- [ ] No hardcoded data exists across the UI logic maps for MVP phase operations securely.
</verification>

<success_criteria>
- [ ] All tasks verified
- [ ] Must-haves confirmed
</success_criteria>
